<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kedai Anung - Warung Otomatis</title>
  <style>
    :root{--accent:#c1531b;--muted:#555}
    body{font-family:'Segoe UI',sans-serif;margin:0;background:#fff;color:#111}
    .container{max-width:960px;margin:28px auto;padding:20px}
    header{display:flex;align-items:center;gap:16px}
    .logo{width:80px;height:80px;border-radius:12px;overflow:hidden;flex-shrink:0}
    .logo img{width:100%;height:100%;object-fit:contain}
    h1{margin:0;font-size:26px;color:var(--accent)}
    p.lead{margin:6px 0 18px;color:var(--muted)}
    .menu{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
    .card{background:#fafafa;padding:12px;border-radius:12px;box-shadow:0 3px 8px rgba(0,0,0,0.08)}
    .item-name{font-weight:600;font-size:18px}
    .controls{margin-top:10px;display:flex;align-items:center;gap:8px}
    .qty{width:36px;height:36px;border-radius:8px;border:1px solid #ddd;display:flex;align-items:center;justify-content:center}
    .qty-btn{width:36px;height:36px;border:none;background:var(--accent);color:white;border-radius:8px;font-size:18px;cursor:pointer}
    .qty-btn:hover{opacity:0.8}
    button.btn{background:var(--accent);color:#fff;padding:10px 14px;border-radius:10px;border:none;cursor:pointer}
    button.btn:hover{opacity:0.8}
    .cart{margin-top:24px;background:#fafafa;padding:14px;border-radius:12px}
    .cart-row{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px dashed #ddd}
    .muted{color:var(--muted);font-size:13px}
    footer{margin-top:30px;text-align:center;color:var(--muted);font-size:13px}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <img src="https://cdn.discordapp.com/attachments/1274240418141175840/1428309417585152133/c1686154-1056-44a2-acf7-c6bfb5e4481a.png?ex=68f2084d&is=68f0b6cd&hm=7f20839695939f32e67a24a28fef99151d54d107b1f33205319fd08b9edbcb10&" alt="Logo Kedai Anung" />
      </div>
      <div>
        <h1>Kedai Anung</h1>
        <p class="lead">Warung sederhana - pesan makanan & minuman langsung lewat WhatsApp.</p>
      </div>
    </header>

    <section>
      <h2>Menu</h2>
      <div class="menu" id="menu"></div>

      <div class="cart">
        <h3>Pesanan Anda</h3>
        <div id="cart-list" class="muted">Belum ada pesanan.</div>
        <div style="margin-top:12px;display:flex;flex-wrap:wrap;gap:8px">
          <input id="customer-name" placeholder="Nama Pemesan" style="flex:1;padding:10px;border-radius:10px;border:1px solid #ddd" />
          <input id="customer-note" placeholder="Catatan tambahan (opsional)" style="flex:1;padding:10px;border-radius:10px;border:1px solid #ddd" />
        </div>
        <div style="margin-top:12px;display:flex;justify-content:flex-end;gap:8px">
          <button class="btn" id="order-btn">Pesan via WhatsApp</button>
        </div>
      </div>

      <div class="cart" style="margin-top:24px">
        <h3>Antrian Pemesanan</h3>
        <div id="queue-list" class="muted">Belum ada antrian.</div>
      </div>
    </section>

    <footer>
      &copy; Kedai Anung â€¢ Pemesanan otomatis via WhatsApp
    </footer>
  </div>

  <script>
    const ownerPhone = '6281929482402'; // nomor WA tujuan
    const menuData = [
      { id: 'mie', name: 'Mie' },
      { id: 'kopi_aceh', name: 'Kopi Aceh' },
      { id: 'kopi_gooday', name: 'Kopi Gooday' },
      { id: 'kopi_hitam', name: 'Kopi Hitam' },
      { id: 'es_jeruk', name: 'Es Jeruk' },
      { id: 'jeruk_panas', name: 'Jeruk Panas' },
      { id: 'es_teh', name: 'Es Teh' },
      { id: 'temulawak', name: 'Temulawak' }
    ];

    let order = {};
    let queue = JSON.parse(localStorage.getItem('queue') || '[]');

    const menuEl = document.getElementById('menu');
    const cartListEl = document.getElementById('cart-list');
    const queueListEl = document.getElementById('queue-list');

    // buat daftar menu
    function createMenu() {
      menuData.forEach(item => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <div class="item-name">${item.name}</div>
          <div class="controls">
            <button class="qty-btn" data-id="${item.id}" data-act="dec">-</button>
            <div class="qty" id="qty-${item.id}">0</div>
            <button class="qty-btn" data-id="${item.id}" data-act="inc">+</button>
          </div>
        `;
        menuEl.appendChild(card);
      });

      menuEl.addEventListener('click', e => {
        const btn = e.target.closest('.qty-btn');
        if (!btn) return;
        const id = btn.dataset.id;
        const act = btn.dataset.act;
        const cur = order[id] || 0;
        const next = Math.max(0, cur + (act === 'inc' ? 1 : -1));
        if (next === 0) delete order[id]; else order[id] = next;
        document.getElementById('qty-' + id).textContent = next;
        renderCart();
      });
    }

    function renderCart() {
      const keys = Object.keys(order);
      if (!keys.length) {
        cartListEl.innerHTML = '<div class="muted">Belum ada pesanan.</div>';
        return;
      }
      cartListEl.innerHTML = keys.map(id => {
        const item = menuData.find(m => m.id === id);
        return `<div class="cart-row"><div>${item.name} x ${order[id]}</div></div>`;
      }).join('');
    }

    function renderQueue() {
      if (!queue.length) {
        queueListEl.innerHTML = '<div class="muted">Belum ada antrian.</div>';
        return;
      }
      queueListEl.innerHTML = queue.map(q =>
        `<div class="cart-row"><div><b>#${q.no}</b> ${q.nama || '(Anonim)'} - ${q.pesanan}</div><div>${q.status}</div></div>`
      ).join('');
    }

    document.getElementById('order-btn').addEventListener('click', () => {
      const keys = Object.keys(order);
      if (!keys.length) return alert('Pilih menu terlebih dahulu!');
      const nama = document.getElementById('customer-name').value.trim();
      const note = document.getElementById('customer-note').value.trim();

      const pesan = keys.map(id => {
        const item = menuData.find(m => m.id === id);
        return `${item.name} x ${order[id]}`;
      }).join(', ');

      const nextNo = (queue.at(-1)?.no || 0) + 1;
      queue.push({ no: nextNo, nama, pesanan: pesan, catatan: note, status: 'Menunggu' });
      localStorage.setItem('queue', JSON.stringify(queue));

      const text = encodeURIComponent(`Halo! Saya ingin pesan:\n${pesan}\nNama: ${nama}\nCatatan: ${note}\nNomor Antrian: ${nextNo}`);
      window.open(`https://wa.me/${ownerPhone}?text=${text}`, '_blank');

      order = {};
      document.querySelectorAll('.qty').forEach(el => el.textContent = '0');
      renderCart();
      renderQueue();
    });

    createMenu();
    renderCart();
    renderQueue();
  </script>
</body>
</html>
